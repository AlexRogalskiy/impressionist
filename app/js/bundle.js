!function t(i,n,s){function r(h,a){if(!n[h]){if(!i[h]){var o="function"==typeof require&&require;if(!a&&o)return o(h,!0);if(e)return e(h,!0);throw new Error("Cannot find module '"+h+"'")}var u=n[h]={exports:{}};i[h][0].call(u.exports,function(t){var n=i[h][1][t];return r(n?n:t)},u,u.exports,t,i,n,s)}return n[h].exports}for(var e="function"==typeof require&&require,h=0;h<s.length;h++)r(s[h]);return r}({1:[function(t,i){i.exports.lerp=function(t,i,n){return t*(1-n)+i*n},i.exports.smoothstep=function(t,i,n){return n=Math.max(0,Math.min(1,(n-t)/(i-t))),n*n*(3-2*n)}},{}],2:[function(t,i){function n(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}function s(t,i,s){var r=s?t[i]:Object.getOwnPropertyDescriptor(t,i);return!s&&r.value&&"object"==typeof r.value&&(r=r.value),r&&n(r)?("undefined"==typeof r.enumerable&&(r.enumerable=!0),"undefined"==typeof r.configurable&&(r.configurable=!0),r):!1}function r(t,i){var n=Object.getOwnPropertyDescriptor(t,i);return n?(n.value&&"object"==typeof n.value&&(n=n.value),n.configurable===!1?!0:!1):!1}function e(t,i,n,e){for(var h in i)if(i.hasOwnProperty(h)){var o=s(i,h,n);if(o!==!1){var u=e||t;if(r(u.prototype,h)){if(a.ignoreFinals)continue;throw new Error("cannot override final property '"+h+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,h,o)}else t.prototype[h]=i[h]}}function h(t,i){if(i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)e(t,i[n].prototype||i[n])}}function a(t){t||(t={});var i,n;if(t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var s=t.Extends;i=function(){s.apply(this,arguments)}}else i=function(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,n=t.Extends,delete t.Extends):i.prototype.constructor=i;var r=null;return t.Mixins&&(r=t.Mixins,delete t.Mixins),h(i,r),e(i,t,!0,n),i}a.extend=e,a.mixin=h,a.ignoreFinals=!1,i.exports=a},{}],3:[function(){!function(t){for(var i=0,n=["webkit","moz"],s=t.requestAnimationFrame,r=t.cancelAnimationFrame,e=n.length;--e>=0&&!s;)s=t[n[e]+"RequestAnimationFrame"],r=t[n[e]+"CancelAnimationFrame"];s&&r||(s=function(t){var n=Date.now(),s=Math.max(i+16,n);return setTimeout(function(){t(i=s)},s-n)},r=clearTimeout),t.requestAnimationFrame=s,t.cancelAnimationFrame=r}(window)},{}],4:[function(t,i,n){!function(){function t(t){t||(t=Math.random),this.p=new Uint8Array(256),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var i=0;256>i;i++)this.p[i]=256*t();for(i=0;512>i;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}var s=.5*(Math.sqrt(3)-1),r=(3-Math.sqrt(3))/6,e=1/3,h=1/6,a=(Math.sqrt(5)-1)/4,o=(5-Math.sqrt(5))/20;t.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,i){var n,e,h,a,o,u=this.permMod12,c=this.perm,l=this.grad3,f=(t+i)*s,y=Math.floor(t+f),d=Math.floor(i+f),v=(y+d)*r,x=y-v,p=d-v,z=t-x,m=i-p;z>m?(a=1,o=0):(a=0,o=1);var w=z-a+r,M=m-o+r,g=z-1+2*r,b=m-1+2*r,q=255&y,A=255&d,S=.5-z*z-m*m;if(0>S)n=0;else{var F=3*u[q+c[A]];S*=S,n=S*S*(l[F]*z+l[F+1]*m)}var k=.5-w*w-M*M;if(0>k)e=0;else{var j=3*u[q+a+c[A+o]];k*=k,e=k*k*(l[j]*w+l[j+1]*M)}var T=.5-g*g-b*b;if(0>T)h=0;else{var P=3*u[q+1+c[A+1]];T*=T,h=T*T*(l[P]*g+l[P+1]*b)}return 70*(n+e+h)},noise3D:function(t,i,n){var s,r,a,o,u,c,l,f,y,d,v=this.permMod12,x=this.perm,p=this.grad3,z=(t+i+n)*e,m=Math.floor(t+z),w=Math.floor(i+z),M=Math.floor(n+z),g=(m+w+M)*h,b=m-g,q=w-g,A=M-g,S=t-b,F=i-q,k=n-A;S>=F?F>=k?(u=1,c=0,l=0,f=1,y=1,d=0):S>=k?(u=1,c=0,l=0,f=1,y=0,d=1):(u=0,c=0,l=1,f=1,y=0,d=1):k>F?(u=0,c=0,l=1,f=0,y=1,d=1):k>S?(u=0,c=1,l=0,f=0,y=1,d=1):(u=0,c=1,l=0,f=1,y=1,d=0);var j=S-u+h,T=F-c+h,P=k-l+h,V=S-f+2*h,_=F-y+2*h,I=k-d+2*h,O=S-1+3*h,C=F-1+3*h,D=k-1+3*h,E=255&m,Q=255&w,N=255&M,L=.6-S*S-F*F-k*k;if(0>L)s=0;else{var U=3*v[E+x[Q+x[N]]];L*=L,s=L*L*(p[U]*S+p[U+1]*F+p[U+2]*k)}var R=.6-j*j-T*T-P*P;if(0>R)r=0;else{var W=3*v[E+u+x[Q+c+x[N+l]]];R*=R,r=R*R*(p[W]*j+p[W+1]*T+p[W+2]*P)}var X=.6-V*V-_*_-I*I;if(0>X)a=0;else{var Y=3*v[E+f+x[Q+y+x[N+d]]];X*=X,a=X*X*(p[Y]*V+p[Y+1]*_+p[Y+2]*I)}var Z=.6-O*O-C*C-D*D;if(0>Z)o=0;else{var G=3*v[E+1+x[Q+1+x[N+1]]];Z*=Z,o=Z*Z*(p[G]*O+p[G+1]*C+p[G+2]*D)}return 32*(s+r+a+o)},noise4D:function(t,i,n,s){var r,e,h,u,c,l=(this.permMod12,this.perm),f=this.grad4,y=(t+i+n+s)*a,d=Math.floor(t+y),v=Math.floor(i+y),x=Math.floor(n+y),p=Math.floor(s+y),z=(d+v+x+p)*o,m=d-z,w=v-z,M=x-z,g=p-z,b=t-m,q=i-w,A=n-M,S=s-g,F=0,k=0,j=0,T=0;b>q?F++:k++,b>A?F++:j++,b>S?F++:T++,q>A?k++:j++,q>S?k++:T++,A>S?j++:T++;var P,V,_,I,O,C,D,E,Q,N,L,U;P=F>=3?1:0,V=k>=3?1:0,_=j>=3?1:0,I=T>=3?1:0,O=F>=2?1:0,C=k>=2?1:0,D=j>=2?1:0,E=T>=2?1:0,Q=F>=1?1:0,N=k>=1?1:0,L=j>=1?1:0,U=T>=1?1:0;var R=b-P+o,W=q-V+o,X=A-_+o,Y=S-I+o,Z=b-O+2*o,G=q-C+2*o,$=A-D+2*o,B=S-E+2*o,H=b-Q+3*o,J=q-N+3*o,K=A-L+3*o,ti=S-U+3*o,ii=b-1+4*o,ni=q-1+4*o,si=A-1+4*o,ri=S-1+4*o,ei=255&d,hi=255&v,ai=255&x,oi=255&p,ui=.6-b*b-q*q-A*A-S*S;if(0>ui)r=0;else{var ci=l[ei+l[hi+l[ai+l[oi]]]]%32*4;ui*=ui,r=ui*ui*(f[ci]*b+f[ci+1]*q+f[ci+2]*A+f[ci+3]*S)}var li=.6-R*R-W*W-X*X-Y*Y;if(0>li)e=0;else{var fi=l[ei+P+l[hi+V+l[ai+_+l[oi+I]]]]%32*4;li*=li,e=li*li*(f[fi]*R+f[fi+1]*W+f[fi+2]*X+f[fi+3]*Y)}var yi=.6-Z*Z-G*G-$*$-B*B;if(0>yi)h=0;else{var di=l[ei+O+l[hi+C+l[ai+D+l[oi+E]]]]%32*4;yi*=yi,h=yi*yi*(f[di]*Z+f[di+1]*G+f[di+2]*$+f[di+3]*B)}var vi=.6-H*H-J*J-K*K-ti*ti;if(0>vi)u=0;else{var xi=l[ei+Q+l[hi+N+l[ai+L+l[oi+U]]]]%32*4;vi*=vi,u=vi*vi*(f[xi]*H+f[xi+1]*J+f[xi+2]*K+f[xi+3]*ti)}var pi=.6-ii*ii-ni*ni-si*si-ri*ri;if(0>pi)c=0;else{var zi=l[ei+1+l[hi+1+l[ai+1+l[oi+1]]]]%32*4;pi*=pi,c=pi*pi*(f[zi]*ii+f[zi+1]*ni+f[zi+2]*si+f[zi+3]*ri)}return 27*(r+e+h+u+c)}},"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof window&&(window.SimplexNoise=t),"undefined"!=typeof n&&(n.SimplexNoise=t),"undefined"!=typeof i&&(i.exports=t)}()},{}],5:[function(t,i){function n(t){this.val=new s(9),t?this.copy(t):this.idt()}var s="undefined"!=typeof Float32Array?Float32Array:Array,r=n.prototype;r.clone=function(){return new n(this)},r.set=function(t){return this.copy(t)},r.copy=function(t){var i=this.val,n=t.val;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this},r.fromMat4=function(t){var i=t.val,n=this.val;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[4],n[4]=i[5],n[5]=i[6],n[6]=i[8],n[7]=i[9],n[8]=i[10],this},r.fromArray=function(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},r.identity=function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},r.transpose=function(){var t=this.val,i=t[1],n=t[2],s=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=n,t[7]=s,this},r.invert=function(){var t=this.val,i=t[0],n=t[1],s=t[2],r=t[3],e=t[4],h=t[5],a=t[6],o=t[7],u=t[8],c=u*e-h*o,l=-u*r+h*a,f=o*r-e*a,y=i*c+n*l+s*f;return y?(y=1/y,t[0]=c*y,t[1]=(-u*n+s*o)*y,t[2]=(h*n-s*e)*y,t[3]=l*y,t[4]=(u*i-s*a)*y,t[5]=(-h*i+s*r)*y,t[6]=f*y,t[7]=(-o*i+n*a)*y,t[8]=(e*i-n*r)*y,this):null},r.adjoint=function(){var t=this.val,i=t[0],n=t[1],s=t[2],r=t[3],e=t[4],h=t[5],a=t[6],o=t[7],u=t[8];return t[0]=e*u-h*o,t[1]=s*o-n*u,t[2]=n*h-s*e,t[3]=h*a-r*u,t[4]=i*u-s*a,t[5]=s*r-i*h,t[6]=r*o-e*a,t[7]=n*a-i*o,t[8]=i*e-n*r,this},r.determinant=function(){var t=this.val,i=t[0],n=t[1],s=t[2],r=t[3],e=t[4],h=t[5],a=t[6],o=t[7],u=t[8];return i*(u*e-h*o)+n*(-u*r+h*a)+s*(o*r-e*a)},r.multiply=function(t){var i=this.val,n=t.val,s=i[0],r=i[1],e=i[2],h=i[3],a=i[4],o=i[5],u=i[6],c=i[7],l=i[8],f=n[0],y=n[1],d=n[2],v=n[3],x=n[4],p=n[5],z=n[6],m=n[7],w=n[8];return i[0]=f*s+y*h+d*u,i[1]=f*r+y*a+d*c,i[2]=f*e+y*o+d*l,i[3]=v*s+x*h+p*u,i[4]=v*r+x*a+p*c,i[5]=v*e+x*o+p*l,i[6]=z*s+m*h+w*u,i[7]=z*r+m*a+w*c,i[8]=z*e+m*o+w*l,this},r.translate=function(t){var i=this.val,n=t.x,s=t.y;return i[6]=n*i[0]+s*i[3]+i[6],i[7]=n*i[1]+s*i[4]+i[7],i[8]=n*i[2]+s*i[5]+i[8],this},r.rotate=function(t){var i=this.val,n=i[0],s=i[1],r=i[2],e=i[3],h=i[4],a=i[5],o=Math.sin(t),u=Math.cos(t);return i[0]=u*n+o*e,i[1]=u*s+o*h,i[2]=u*r+o*a,i[3]=u*e-o*n,i[4]=u*h-o*s,i[5]=u*a-o*r,this},r.scale=function(t){var i=this.val,n=t.x,s=t.y;return i[0]=n*i[0],i[1]=n*i[1],i[2]=n*i[2],i[3]=s*i[3],i[4]=s*i[4],i[5]=s*i[5],this},r.fromQuat=function(t){var i=t.x,n=t.y,s=t.z,r=t.w,e=i+i,h=n+n,a=s+s,o=i*e,u=i*h,c=i*a,l=n*h,f=n*a,y=s*a,d=r*e,v=r*h,x=r*a,p=this.val;return p[0]=1-(l+y),p[3]=u+x,p[6]=c-v,p[1]=u-x,p[4]=1-(o+y),p[7]=f+d,p[2]=c+v,p[5]=f-d,p[8]=1-(o+l),this},r.normalFromMat4=function(t){var i=t.val,n=this.val,s=i[0],r=i[1],e=i[2],h=i[3],a=i[4],o=i[5],u=i[6],c=i[7],l=i[8],f=i[9],y=i[10],d=i[11],v=i[12],x=i[13],p=i[14],z=i[15],m=s*o-r*a,w=s*u-e*a,M=s*c-h*a,g=r*u-e*o,b=r*c-h*o,q=e*c-h*u,A=l*x-f*v,S=l*p-y*v,F=l*z-d*v,k=f*p-y*x,j=f*z-d*x,T=y*z-d*p,P=m*T-w*j+M*k+g*F-b*S+q*A;return P?(P=1/P,n[0]=(o*T-u*j+c*k)*P,n[1]=(u*F-a*T-c*S)*P,n[2]=(a*j-o*F+c*A)*P,n[3]=(e*j-r*T-h*k)*P,n[4]=(s*T-e*F+h*S)*P,n[5]=(r*F-s*j-h*A)*P,n[6]=(x*q-p*b+z*g)*P,n[7]=(p*M-v*q-z*w)*P,n[8]=(v*b-x*M+z*m)*P,this):null},r.mul=r.multiply,r.idt=r.identity,r.reset=r.idt,r.toString=function(){var t=this.val;return"Matrix3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.str=r.toString,i.exports=n},{}],6:[function(t,i){function n(t){this.val=new s(16),t?this.copy(t):this.idt()}var s="undefined"!=typeof Float32Array?Float32Array:Array,r=1e-6,e=n.prototype;e.clone=function(){return new n(this)},e.set=function(t){return this.copy(t)},e.copy=function(t){var i=this.val,n=t.val;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},e.fromArray=function(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this},e.identity=function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},e.transpose=function(){var t=this.val,i=t[1],n=t[2],s=t[3],r=t[6],e=t[7],h=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=r,t[11]=t[14],t[12]=s,t[13]=e,t[14]=h,this},e.invert=function(){var t=this.val,i=t[0],n=t[1],s=t[2],r=t[3],e=t[4],h=t[5],a=t[6],o=t[7],u=t[8],c=t[9],l=t[10],f=t[11],y=t[12],d=t[13],v=t[14],x=t[15],p=i*h-n*e,z=i*a-s*e,m=i*o-r*e,w=n*a-s*h,M=n*o-r*h,g=s*o-r*a,b=u*d-c*y,q=u*v-l*y,A=u*x-f*y,S=c*v-l*d,F=c*x-f*d,k=l*x-f*v,j=p*k-z*F+m*S+w*A-M*q+g*b;return j?(j=1/j,t[0]=(h*k-a*F+o*S)*j,t[1]=(s*F-n*k-r*S)*j,t[2]=(d*g-v*M+x*w)*j,t[3]=(l*M-c*g-f*w)*j,t[4]=(a*A-e*k-o*q)*j,t[5]=(i*k-s*A+r*q)*j,t[6]=(v*m-y*g-x*z)*j,t[7]=(u*g-l*m+f*z)*j,t[8]=(e*F-h*A+o*b)*j,t[9]=(n*A-i*F-r*b)*j,t[10]=(y*M-d*m+x*p)*j,t[11]=(c*m-u*M-f*p)*j,t[12]=(h*q-e*S-a*b)*j,t[13]=(i*S-n*q+s*b)*j,t[14]=(d*z-y*w-v*p)*j,t[15]=(u*w-c*z+l*p)*j,this):null},e.adjoint=function(){var t=this.val,i=t[0],n=t[1],s=t[2],r=t[3],e=t[4],h=t[5],a=t[6],o=t[7],u=t[8],c=t[9],l=t[10],f=t[11],y=t[12],d=t[13],v=t[14],x=t[15];return t[0]=h*(l*x-f*v)-c*(a*x-o*v)+d*(a*f-o*l),t[1]=-(n*(l*x-f*v)-c*(s*x-r*v)+d*(s*f-r*l)),t[2]=n*(a*x-o*v)-h*(s*x-r*v)+d*(s*o-r*a),t[3]=-(n*(a*f-o*l)-h*(s*f-r*l)+c*(s*o-r*a)),t[4]=-(e*(l*x-f*v)-u*(a*x-o*v)+y*(a*f-o*l)),t[5]=i*(l*x-f*v)-u*(s*x-r*v)+y*(s*f-r*l),t[6]=-(i*(a*x-o*v)-e*(s*x-r*v)+y*(s*o-r*a)),t[7]=i*(a*f-o*l)-e*(s*f-r*l)+u*(s*o-r*a),t[8]=e*(c*x-f*d)-u*(h*x-o*d)+y*(h*f-o*c),t[9]=-(i*(c*x-f*d)-u*(n*x-r*d)+y*(n*f-r*c)),t[10]=i*(h*x-o*d)-e*(n*x-r*d)+y*(n*o-r*h),t[11]=-(i*(h*f-o*c)-e*(n*f-r*c)+u*(n*o-r*h)),t[12]=-(e*(c*v-l*d)-u*(h*v-a*d)+y*(h*l-a*c)),t[13]=i*(c*v-l*d)-u*(n*v-s*d)+y*(n*l-s*c),t[14]=-(i*(h*v-a*d)-e*(n*v-s*d)+y*(n*a-s*h)),t[15]=i*(h*l-a*c)-e*(n*l-s*c)+u*(n*a-s*h),this},e.determinant=function(){var t=this.val,i=t[0],n=t[1],s=t[2],r=t[3],e=t[4],h=t[5],a=t[6],o=t[7],u=t[8],c=t[9],l=t[10],f=t[11],y=t[12],d=t[13],v=t[14],x=t[15],p=i*h-n*e,z=i*a-s*e,m=i*o-r*e,w=n*a-s*h,M=n*o-r*h,g=s*o-r*a,b=u*d-c*y,q=u*v-l*y,A=u*x-f*y,S=c*v-l*d,F=c*x-f*d,k=l*x-f*v;return p*k-z*F+m*S+w*A-M*q+g*b},e.multiply=function(t){var i=this.val,n=t.val,s=i[0],r=i[1],e=i[2],h=i[3],a=i[4],o=i[5],u=i[6],c=i[7],l=i[8],f=i[9],y=i[10],d=i[11],v=i[12],x=i[13],p=i[14],z=i[15],m=n[0],w=n[1],M=n[2],g=n[3];return i[0]=m*s+w*a+M*l+g*v,i[1]=m*r+w*o+M*f+g*x,i[2]=m*e+w*u+M*y+g*p,i[3]=m*h+w*c+M*d+g*z,m=n[4],w=n[5],M=n[6],g=n[7],i[4]=m*s+w*a+M*l+g*v,i[5]=m*r+w*o+M*f+g*x,i[6]=m*e+w*u+M*y+g*p,i[7]=m*h+w*c+M*d+g*z,m=n[8],w=n[9],M=n[10],g=n[11],i[8]=m*s+w*a+M*l+g*v,i[9]=m*r+w*o+M*f+g*x,i[10]=m*e+w*u+M*y+g*p,i[11]=m*h+w*c+M*d+g*z,m=n[12],w=n[13],M=n[14],g=n[15],i[12]=m*s+w*a+M*l+g*v,i[13]=m*r+w*o+M*f+g*x,i[14]=m*e+w*u+M*y+g*p,i[15]=m*h+w*c+M*d+g*z,this},e.translate=function(t){var i=t.x,n=t.y,s=t.z,r=this.val;return r[12]=r[0]*i+r[4]*n+r[8]*s+r[12],r[13]=r[1]*i+r[5]*n+r[9]*s+r[13],r[14]=r[2]*i+r[6]*n+r[10]*s+r[14],r[15]=r[3]*i+r[7]*n+r[11]*s+r[15],this},e.scale=function(t){var i=t.x,n=t.y,s=t.z,r=this.val;return r[0]=r[0]*i,r[1]=r[1]*i,r[2]=r[2]*i,r[3]=r[3]*i,r[4]=r[4]*n,r[5]=r[5]*n,r[6]=r[6]*n,r[7]=r[7]*n,r[8]=r[8]*s,r[9]=r[9]*s,r[10]=r[10]*s,r[11]=r[11]*s,r[12]=r[12],r[13]=r[13],r[14]=r[14],r[15]=r[15],this},e.rotate=function(t,i){var n,s,e,h,a,o,u,c,l,f,y,d,v,x,p,z,m,w,M,g,b,q,A,S,F=this.val,k=i.x,j=i.y,T=i.z,P=Math.sqrt(k*k+j*j+T*T);return Math.abs(P)<r?null:(P=1/P,k*=P,j*=P,T*=P,n=Math.sin(t),s=Math.cos(t),e=1-s,h=F[0],a=F[1],o=F[2],u=F[3],c=F[4],l=F[5],f=F[6],y=F[7],d=F[8],v=F[9],x=F[10],p=F[11],z=k*k*e+s,m=j*k*e+T*n,w=T*k*e-j*n,M=k*j*e-T*n,g=j*j*e+s,b=T*j*e+k*n,q=k*T*e+j*n,A=j*T*e-k*n,S=T*T*e+s,F[0]=h*z+c*m+d*w,F[1]=a*z+l*m+v*w,F[2]=o*z+f*m+x*w,F[3]=u*z+y*m+p*w,F[4]=h*M+c*g+d*b,F[5]=a*M+l*g+v*b,F[6]=o*M+f*g+x*b,F[7]=u*M+y*g+p*b,F[8]=h*q+c*A+d*S,F[9]=a*q+l*A+v*S,F[10]=o*q+f*A+x*S,F[11]=u*q+y*A+p*S,this)},e.rotateX=function(t){var i=this.val,n=Math.sin(t),s=Math.cos(t),r=i[4],e=i[5],h=i[6],a=i[7],o=i[8],u=i[9],c=i[10],l=i[11];return i[4]=r*s+o*n,i[5]=e*s+u*n,i[6]=h*s+c*n,i[7]=a*s+l*n,i[8]=o*s-r*n,i[9]=u*s-e*n,i[10]=c*s-h*n,i[11]=l*s-a*n,this},e.rotateY=function(t){var i=this.val,n=Math.sin(t),s=Math.cos(t),r=i[0],e=i[1],h=i[2],a=i[3],o=i[8],u=i[9],c=i[10],l=i[11];return i[0]=r*s-o*n,i[1]=e*s-u*n,i[2]=h*s-c*n,i[3]=a*s-l*n,i[8]=r*n+o*s,i[9]=e*n+u*s,i[10]=h*n+c*s,i[11]=a*n+l*s,this},e.rotateZ=function(t){var i=this.val,n=Math.sin(t),s=Math.cos(t),r=i[0],e=i[1],h=i[2],a=i[3],o=i[4],u=i[5],c=i[6],l=i[7];return i[0]=r*s+o*n,i[1]=e*s+u*n,i[2]=h*s+c*n,i[3]=a*s+l*n,i[4]=o*s-r*n,i[5]=u*s-e*n,i[6]=c*s-h*n,i[7]=l*s-a*n,this},e.fromRotationTranslation=function(t,i){var n=this.val,s=t.x,r=t.y,e=t.z,h=t.w,a=s+s,o=r+r,u=e+e,c=s*a,l=s*o,f=s*u,y=r*o,d=r*u,v=e*u,x=h*a,p=h*o,z=h*u;return n[0]=1-(y+v),n[1]=l+z,n[2]=f-p,n[3]=0,n[4]=l-z,n[5]=1-(c+v),n[6]=d+x,n[7]=0,n[8]=f+p,n[9]=d-x,n[10]=1-(c+y),n[11]=0,n[12]=i.x,n[13]=i.y,n[14]=i.z,n[15]=1,this},e.fromQuat=function(t){var i=this.val,n=t.x,s=t.y,r=t.z,e=t.w,h=n+n,a=s+s,o=r+r,u=n*h,c=n*a,l=n*o,f=s*a,y=s*o,d=r*o,v=e*h,x=e*a,p=e*o;return i[0]=1-(f+d),i[1]=c+p,i[2]=l-x,i[3]=0,i[4]=c-p,i[5]=1-(u+d),i[6]=y+v,i[7]=0,i[8]=l+x,i[9]=y-v,i[10]=1-(u+f),i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},e.frustum=function(t,i,n,s,r,e){var h=this.val,a=1/(i-t),o=1/(s-n),u=1/(r-e);return h[0]=2*r*a,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=2*r*o,h[6]=0,h[7]=0,h[8]=(i+t)*a,h[9]=(s+n)*o,h[10]=(e+r)*u,h[11]=-1,h[12]=0,h[13]=0,h[14]=e*r*2*u,h[15]=0,this},e.perspective=function(t,i,n,s){var r=this.val,e=1/Math.tan(t/2),h=1/(n-s);return r[0]=e/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(s+n)*h,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*s*n*h,r[15]=0,this},e.ortho=function(t,i,n,s,r,e){var h=this.val,a=1/(t-i),o=1/(n-s),u=1/(r-e);return h[0]=-2*a,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*o,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*u,h[11]=0,h[12]=(t+i)*a,h[13]=(s+n)*o,h[14]=(e+r)*u,h[15]=1,this},e.lookAt=function(t,i,n){var s,e,h,a,o,u,c,l,f,y,d=this.val,v=t.x,x=t.y,p=t.z,z=n.x,m=n.y,w=n.z,M=i.x,g=i.y,b=i.z;return Math.abs(v-M)<r&&Math.abs(x-g)<r&&Math.abs(p-b)<r?this.identity():(c=v-M,l=x-g,f=p-b,y=1/Math.sqrt(c*c+l*l+f*f),c*=y,l*=y,f*=y,s=m*f-w*l,e=w*c-z*f,h=z*l-m*c,y=Math.sqrt(s*s+e*e+h*h),y?(y=1/y,s*=y,e*=y,h*=y):(s=0,e=0,h=0),a=l*h-f*e,o=f*s-c*h,u=c*e-l*s,y=Math.sqrt(a*a+o*o+u*u),y?(y=1/y,a*=y,o*=y,u*=y):(a=0,o=0,u=0),d[0]=s,d[1]=a,d[2]=c,d[3]=0,d[4]=e,d[5]=o,d[6]=l,d[7]=0,d[8]=h,d[9]=u,d[10]=f,d[11]=0,d[12]=-(s*v+e*x+h*p),d[13]=-(a*v+o*x+u*p),d[14]=-(c*v+l*x+f*p),d[15]=1,this)},e.mul=e.multiply,e.idt=e.identity,e.reset=e.idt,e.toString=function(){var t=this.val;return"Matrix4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.str=e.toString,i.exports=n},{}],7:[function(t,i){function n(t,i,n,s){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=s||0)}var s=t("./Vector3"),r=t("./Matrix3"),e=t("./common"),h="undefined"!=typeof Int8Array?new Int8Array([1,2,0]):[1,2,0],a="undefined"!=typeof Float32Array?new Float32Array([0,0,0]):[0,0,0],o=new s(1,0,0),u=new s(0,1,0),c=new s,l=new r,f=n.prototype;for(var y in e)f[y]=e[y];f.rotationTo=function(t,i){var n=t.x*i.x+t.y*i.y+t.z*i.z;return-.999999>n?(c.copy(o).cross(t).len()<1e-6&&c.copy(u).cross(t),c.normalize(),this.setAxisAngle(c,Math.PI)):n>.999999?(this.x=0,this.y=0,this.z=0,this.w=1,this):(c.copy(t).cross(i),this.x=c.x,this.y=c.y,this.z=c.z,this.w=1+n,this.normalize())},f.setAxes=function(t,i,n){var s=l.val;return s[0]=i.x,s[3]=i.y,s[6]=i.z,s[1]=n.x,s[4]=n.y,s[7]=n.z,s[2]=-t.x,s[5]=-t.y,s[8]=-t.z,this.fromMat3(l).normalize()},f.identity=function(){return this.x=this.y=this.z=0,this.w=1,this},f.setAxisAngle=function(t,i){i=.5*i;var n=Math.sin(i);return this.x=n*t.x,this.y=n*t.y,this.z=n*t.z,this.w=Math.cos(i),this},f.multiply=function(t){var i=this.x,n=this.y,s=this.z,r=this.w,e=t.x,h=t.y,a=t.z,o=t.w;return this.x=i*o+r*e+n*a-s*h,this.y=n*o+r*h+s*e-i*a,this.z=s*o+r*a+i*h-n*e,this.w=r*o-i*e-n*h-s*a,this},f.slerp=function(t,i){var n,s,r,e,h,a=this.x,o=this.y,u=this.y,c=this.y,l=t.x,f=t.y,y=t.z,d=t.w;return s=a*l+o*f+u*y+c*d,0>s&&(s=-s,l=-l,f=-f,y=-y,d=-d),1-s>1e-6?(n=Math.acos(s),r=Math.sin(n),e=Math.sin((1-i)*n)/r,h=Math.sin(i*n)/r):(e=1-i,h=i),this.x=e*a+h*l,this.y=e*o+h*f,this.z=e*u+h*y,this.w=e*c+h*d,this},f.invert=function(){var t=this.x,i=this.y,n=this.z,s=this.w,r=t*t+i*i+n*n+s*s,e=r?1/r:0;return this.x=-t*e,this.y=-i*e,this.z=-n*e,this.w=s*e,this},f.conjugate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},f.rotateX=function(t){t*=.5;var i=this.x,n=this.y,s=this.z,r=this.w,e=Math.sin(t),h=Math.cos(t);return this.x=i*h+r*e,this.y=n*h+s*e,this.z=s*h-n*e,this.w=r*h-i*e,this},f.rotateY=function(t){t*=.5;var i=this.x,n=this.y,s=this.z,r=this.w,e=Math.sin(t),h=Math.cos(t);return this.x=i*h-s*e,this.y=n*h+r*e,this.z=s*h+i*e,this.w=r*h-n*e,this},f.rotateZ=function(t){t*=.5;var i=this.x,n=this.y,s=this.z,r=this.w,e=Math.sin(t),h=Math.cos(t);return this.x=i*h+n*e,this.y=n*h-i*e,this.z=s*h+r*e,this.w=r*h-s*e,this},f.calculateW=function(){var t=this.x,i=this.y,n=this.z;return this.x=t,this.y=i,this.z=n,this.w=-Math.sqrt(Math.abs(1-t*t-i*i-n*n)),this},f.fromMat3=function(t){var i,n=t.val,s=n[0]+n[4]+n[8];if(s>0)i=Math.sqrt(s+1),this.w=.5*i,i=.5/i,this.x=(n[7]-n[5])*i,this.y=(n[2]-n[6])*i,this.z=(n[3]-n[1])*i;else{var r=0;n[4]>n[0]&&(r=1),n[8]>n[3*r+r]&&(r=2);var e=h[r],o=h[e];i=Math.sqrt(n[3*r+r]-n[3*e+e]-n[3*o+o]+1),a[r]=.5*i,i=.5/i,a[e]=(n[3*e+r]+n[3*r+e])*i,a[o]=(n[3*o+r]+n[3*r+o])*i,this.x=a[0],this.y=a[1],this.z=a[2],this.w=(n[3*o+e]-n[3*e+o])*i}return this},f.idt=f.identity,f.sub=f.subtract,f.mul=f.multiply,f.len=f.length,f.lenSq=f.lengthSq,f.reset=f.idt,f.toString=function(){return"Quaternion("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},f.str=f.toString,i.exports=n},{"./Matrix3":5,"./Vector3":9,"./common":11}],8:[function(t,i){function n(t,i){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(this.x=t||0,this.y=i||0)}var s=n.prototype;s.clone=function(){return new n(this.x,this.y)},s.copy=function(t){return this.x=t.x||0,this.y=t.y||0,this},s.set=function(t,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(this.x=t||0,this.y=i||0),this},s.add=function(t){return this.x+=t.x,this.y+=t.y,this},s.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},s.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},s.scale=function(t){return this.x*=t,this.y*=t,this},s.divide=function(t){return this.x/=t.x,this.y/=t.y,this},s.negate=function(){return this.x=-this.x,this.y=-this.y,this},s.distance=function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},s.distanceSq=function(t){var i=t.x-this.x,n=t.y-this.y;return i*i+n*n},s.length=function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},s.lengthSq=function(){var t=this.x,i=this.y;return t*t+i*i},s.normalize=function(){var t=this.x,i=this.y,n=t*t+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=i*n),this},s.dot=function(t){return this.x*t.x+this.y*t.y},s.cross=function(t){return this.x*t.y-this.y*t.x},s.lerp=function(t,i){var n=this.x,s=this.y;return i=i||0,this.x=n+i*(t.x-n),this.y=s+i*(t.y-s),this},s.transformMat3=function(t){var i=this.x,n=this.y,s=t.val;return this.x=s[0]*i+s[2]*n+s[4],this.y=s[1]*i+s[3]*n+s[5],this},s.transformMat4=function(t){var i=this.x,n=this.y,s=t.val;return this.x=s[0]*i+s[4]*n+s[12],this.y=s[1]*i+s[5]*n+s[13],this},s.reset=function(){return this.x=0,this.y=0,this},s.sub=s.subtract,s.mul=s.multiply,s.div=s.divide,s.dist=s.distance,s.distSq=s.distanceSq,s.len=s.length,s.lenSq=s.lengthSq,s.toString=function(){return"Vector2("+this.x+", "+this.y+")"},s.random=function(t){t=t||1;var i=2*Math.random()*Math.PI;return this.x=Math.cos(i)*t,this.y=Math.sin(i)*t,this},s.str=s.toString,i.exports=n},{}],9:[function(t,i){function n(t,i,n){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0)}var s=n.prototype;s.clone=function(){return new n(this.x,this.y,this.z)},s.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},s.set=function(t,i,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0),this},s.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},s.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},s.multiply=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},s.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},s.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},s.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},s.distance=function(t){var i=t.x-this.x,n=t.y-this.y,s=t.z-this.z;return Math.sqrt(i*i+n*n+s*s)},s.distanceSq=function(t){var i=t.x-this.x,n=t.y-this.y,s=t.z-this.z;return i*i+n*n+s*s},s.length=function(){var t=this.x,i=this.y,n=this.z;return Math.sqrt(t*t+i*i+n*n)},s.lengthSq=function(){var t=this.x,i=this.y,n=this.z;return t*t+i*i+n*n},s.normalize=function(){var t=this.x,i=this.y,n=this.z,s=t*t+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),this.x=t*s,this.y=i*s,this.z=n*s),this},s.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},s.cross=function(t){var i=this.x,n=this.y,s=this.z,r=t.x,e=t.y,h=t.z;return this.x=n*h-s*e,this.y=s*r-i*h,this.z=i*e-n*r,this},s.lerp=function(t,i){var n=this.x,s=this.y,r=this.z;return i=i||0,this.x=n+i*(t.x-n),this.y=s+i*(t.y-s),this.z=r+i*(t.z-r),this},s.transformMat4=function(t){var i=this.x,n=this.y,s=this.z,r=t.val;return this.x=r[0]*i+r[4]*n+r[8]*s+r[12],this.y=r[1]*i+r[5]*n+r[9]*s+r[13],this.z=r[2]*i+r[6]*n+r[10]*s+r[14],this},s.transformMat3=function(t){var i=this.x,n=this.y,s=this.z,r=t.val;return this.x=i*r[0]+n*r[3]+s*r[6],this.y=i*r[1]+n*r[4]+s*r[7],this.z=i*r[2]+n*r[5]+s*r[8],this},s.transformQuat=function(t){var i=this.x,n=this.y,s=this.z,r=t.x,e=t.y,h=t.z,a=t.w,o=a*i+e*s-h*n,u=a*n+h*i-r*s,c=a*s+r*n-e*i,l=-r*i-e*n-h*s;return this.x=o*a+l*-r+u*-h-c*-e,this.y=u*a+l*-e+c*-r-o*-h,this.z=c*a+l*-h+o*-e-u*-r,this},s.project=function(t){var i=this.x,n=this.y,s=this.z,r=t.val,e=r[0],h=r[1],a=r[2],o=r[3],u=r[4],c=r[5],l=r[6],f=r[7],y=r[8],d=r[9],v=r[10],x=r[11],p=r[12],z=r[13],m=r[14],w=r[15],M=1/(i*o+n*f+s*x+w);return this.x=(i*e+n*u+s*y+p)*M,this.y=(i*h+n*c+s*d+z)*M,this.z=(i*a+n*l+s*v+m)*M,this},s.unproject=function(t,i){var n=t.x,s=t.y,r=t.z,e=t.w,h=this.x,a=this.y,o=this.z;return h-=n,a=e-a-1,a-=s,this.x=2*h/r-1,this.y=2*a/e-1,this.z=2*o-1,this.project(i)},s.random=function(t){t=t||1;var i=2*Math.random()*Math.PI,n=2*Math.random()-1,s=Math.sqrt(1-n*n)*t;return this.x=Math.cos(i)*s,this.y=Math.sin(i)*s,this.z=n*t,this},s.reset=function(){return this.x=0,this.y=0,this.z=0,this},s.sub=s.subtract,s.mul=s.multiply,s.div=s.divide,s.dist=s.distance,s.distSq=s.distanceSq,s.len=s.length,s.lenSq=s.lengthSq,s.toString=function(){return"Vector3("+this.x+", "+this.y+", "+this.z+")"},s.str=s.toString,i.exports=n},{}],10:[function(t,i){function n(t,i,n,s){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=s||0)}var s=t("./common"),r=n.prototype;for(var e in s)r[e]=s[e];r.clone=function(){return new n(this.x,this.y,this.z,this.w)},r.multiply=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},r.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},r.distance=function(t){var i=t.x-this.x,n=t.y-this.y,s=t.z-this.z,r=t.w-this.w;return Math.sqrt(i*i+n*n+s*s+r*r)},r.distanceSq=function(t){var i=t.x-this.x,n=t.y-this.y,s=t.z-this.z,r=t.w-this.w;return i*i+n*n+s*s+r*r},r.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},r.transformMat4=function(t){var i=t.val,n=this.x,s=this.y,r=this.z,e=this.w;return this.x=i[0]*n+i[4]*s+i[8]*r+i[12]*e,this.y=i[1]*n+i[5]*s+i[9]*r+i[13]*e,this.z=i[2]*n+i[6]*s+i[10]*r+i[14]*e,this.w=i[3]*n+i[7]*s+i[11]*r+i[15]*e,this},r.transformQuat=function(t){var i=this.x,n=this.y,s=this.z,r=t.x,e=t.y,h=t.z,a=t.w,o=a*i+e*s-h*n,u=a*n+h*i-r*s,c=a*s+r*n-e*i,l=-r*i-e*n-h*s;return this.x=o*a+l*-r+u*-h-c*-e,this.y=u*a+l*-e+c*-r-o*-h,this.z=c*a+l*-h+o*-e-u*-r,this},r.random=function(t){return t=t||1,this.x=(2*Math.random()-1)*t,this.y=(2*Math.random()-1)*t,this.z=(2*Math.random()-1)*t,this.w=(2*Math.random()-1)*t,this},r.reset=function(){return this.x=0,this.y=0,this.z=0,this.w=0,this},r.sub=r.subtract,r.mul=r.multiply,r.div=r.divide,r.dist=r.distance,r.distSq=r.distanceSq,r.len=r.length,r.lenSq=r.lengthSq,r.toString=function(){return"Vector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},r.str=r.toString,i.exports=n},{"./common":11}],11:[function(t,i){i.exports={copy:function(t){return this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0,this},set:function(t,i,n,s){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=s||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,i=this.y,n=this.z,s=this.w;return Math.sqrt(t*t+i*i+n*n+s*s)},lengthSq:function(){var t=this.x,i=this.y,n=this.z,s=this.w;return t*t+i*i+n*n+s*s},normalize:function(){var t=this.x,i=this.y,n=this.z,s=this.w,r=t*t+i*i+n*n+s*s;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=i*r,this.z=n*r,this.w=s*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){var n=this.x,s=this.y,r=this.z,e=this.w;return i=i||0,this.x=n+i*(t.x-n),this.y=s+i*(t.y-s),this.z=r+i*(t.z-r),this.w=e+i*(t.w-e),this}}},{}],12:[function(t,i){i.exports={Vector2:t("./Vector2"),Vector3:t("./Vector3"),Vector4:t("./Vector4"),Matrix3:t("./Matrix3"),Matrix4:t("./Matrix4"),Quaternion:t("./Quaternion")}},{"./Matrix3":5,"./Matrix4":6,"./Quaternion":7,"./Vector2":8,"./Vector3":9,"./Vector4":10}],13:[function(t){{var i=window.$,n=(t("simplex-noise"),t("vecmath").Vector2),s=(t("interpolation").smoothstep,t("interpolation").lerp),r=t("./util/NoiseMap"),e=t("./util/imagedata"),h=t("./impression").Particle,a=window.dat,o=new n,u=new n;t("raf.js")}i(function(){function t(){q=e.getImageData(b).data,d(),requestAnimationFrame(x)}function n(){for(var t in F.__folders.stroke.__controllers)F.__folders.stroke.__controllers[t].updateDisplay();for(var t in F.__folders.color.__controllers)F.__folders.color.__controllers[t].updateDisplay()}function c(){TweenLite.killTweensOf(A),n(),TweenLite.fromTo(A,1,{thickness:30},{thickness:20,ease:Expo.easeOut,delay:2}),TweenLite.fromTo(A,3,{length:23,alpha:.3,life:.7,speed:1},{life:.5,alpha:.2,length:70,speed:.6,delay:1,onUpdate:n.bind(this)}),TweenLite.to(A,3,{thickness:7,length:30,delay:4}),TweenLite.to(A,1,{length:10,delay:6})}function l(){k.length=0;for(var t=0;j>t;t++)k.push((new h).reset(z,m).random())}function f(){S.css("opacity",.2*A.grain)}function y(){F=new a.GUI;var t=F.addFolder("noise");t.add(A,"shift");var n=t.add(A,"scale",.1,5);n.onFinishChange(function(){g.scale=A.scale,g.generate()});var s=F.addFolder("stroke");s.add(A,"count",1,1500).onFinishChange(function(t){j=~~t,l()}),s.add(A,"length",.1,200),s.add(A,"thickness",.1,30),s.add(A,"life",0,1),s.add(A,"speed",0,1),s.add(A,"alpha",0,1),s.add(A,"angle",0,2),s.add(A,"round"),s.add(A,"motion"),s.open();var r=F.addFolder("color");r.add(A,"useOriginal"),r.add(A,"hue",0,360),r.add(A,"saturation",0,1),r.add(A,"lightness",0,1),r.add(A,"grain",0,1).onFinishChange(f.bind(this)),r.open();var e=F.addFolder("canvas");e.add(A,"painting"),e.addColor(A,"background"),e.add(A,"viewOriginal").onFinishChange(function(t){i(b).css("visibility",t?"visible":"hidden")}),e.add(A,"animate"),e.add(A,"clear"),e.open()}function d(){w.globalAlpha=1,w.fillStyle=A.background,w.fillRect(0,0,z,m)}function v(){TweenLite.killTweensOf(A),d(),l()}function x(){if(requestAnimationFrame(x),P+=.1,T++,A.painting){A.shift&&T%20===0&&(g.offset+=.01,g.generate());for(var t=b.width,i=0;i<k.length;i++){var n=k[i];n.motion&&n.position.add(n.velocity);var r=~~n.position.x,e=~~n.position.y,h=z,a=z,c=g.sample(r*(M/h),e*(M/a)),l=c*Math.PI*2*A.angle;o.set(Math.cos(l),Math.sin(l)),n.velocity.add(o),n.velocity.normalize(),(n.position.x>z||n.position.y>m||n.position.y<0)&&n.reset();var f=c/2+.5,y=(g.offset%50/50*f,4*(r+e*t)),d=q[y],v=q[y+1],p=q[y+2],S=A.hue,F=.2126*(d/255)+.7152*(v/255)+.0722*(p/255),j=F;w.strokeStyle=A.useOriginal?"rgb("+~~(d*j)+", "+~~(v*j)+", "+~~(p*j)+")":"hsl("+s(S,S-100,f)+", "+(1-F)*s(.2,.9,f)*A.saturation*100+"%, "+F*s(.45,1,f)*A.lightness*100+"%)";w.beginPath(),w.moveTo(n.position.x,n.position.y);var V=A.length*(c/2+.5)*n.size;o.copy(n.position),u.copy(n.velocity).scale(V),o.add(u),w.lineTo(o.x,o.y),w.stroke(),w.globalAlpha=A.alpha,w.lineWidth=A.thickness*(c/2+.5),w.lineCap=A.round?"round":"square",n.size+=.1*A.speed*n.speed,n.size>=A.life&&n.reset(z,m).random()}}}var p=i("<canvas>").appendTo(document.body)[0],z=900,m=535;p.width=z,p.height=m;var w=p.getContext("2d"),M=256,g=new r(M);g.scale=3.2,g.smoothing=!0,g.generate();var b=new Image;b.onload=t,b.src="img/skyline2.png";var q,A={scale:g.scale,shift:!1,painting:!0,count:500,length:33,thickness:12,speed:1,life:1,alpha:.25,round:!0,motion:!0,angle:1,useOriginal:!0,hue:70,saturation:1,lightness:1,grain:.7,background:"#2f2f2f",clear:v,animate:c,viewOriginal:!1},S=i("<div>").appendTo(document.body).addClass("noise overlay").css({width:z,height:m,opacity:.2*A.grain});i(document.body).css("background",A.background),i(b).appendTo(document.body).css({visibility:"hidden"}).addClass("overlay original");
var F;y();var k=[],j=500,T=0,P=0;l(),c()})},{"./impression":15,"./util/NoiseMap":16,"./util/imagedata":17,interpolation:1,"raf.js":3,"simplex-noise":4,vecmath:12}],14:[function(t,i){function n(t,i,n,r){this.position=new s(t,i),this.velocity=new s(n,r),this.size=0,this.speed=Math.random(),this.brightness=Math.random()}var s=t("vecmath").Vector2;n.prototype.random=function(){return this.size=Math.random(),this},n.prototype.reset=function(t,i){return t=t||0,i=i||0,this.size=0,this.brightness=Math.random(),this.velocity.set(0,0),this.position.set(Math.random()*t,Math.random()*i),this},i.exports=n},{vecmath:12}],15:[function(t,i){i.exports={Particle:t("./Particle")}},{"./Particle":14}],16:[function(t,i){var n=t("klasse"),s=t("simplex-noise"),r=(t("interpolation").lerp,t("./sampling")),e=void 0,h=new s(e),a=new n({initialize:function(t){if(!t)throw"no size specified to NoiseMap";this.size=t,this.scale=20,this.offset=0,this.smooth=!0,this.seamless=!1,this.data=new Float32Array(this.size*this.size)},seamlessNoise:function(t,i,n,s,r,e,a){var o=n/(2*Math.PI),u=2*Math.PI*t/n,c=o*Math.cos(u),l=o*Math.sin(u),f=2*Math.PI*i/n,y=o*Math.cos(f),d=o*Math.sin(f);return h.noise4D(s+c,r+l,e+y,a+d)},generate:function(){for(var t=this.data,i=this.size,n=this.offset,s=this.seamless,r=this.scale,e=0;e<t.length;e++){var a=e%i,o=~~(e/i);t[e]=s?this.seamlessNoise(a/i*r+n,o/i*r+n,r,0,0,0,0):h.noise3D(a/i*r,o/i*r,n)}},sample:function(t,i){return this.smooth?r.bilinear(this.data,this.size,t,i):r.nearest(this.data,this.size,t,i)}});i.exports=a},{"./sampling":18,interpolation:1,klasse:2,"simplex-noise":4}],17:[function(t,i){var n,s;i.exports.getImageData=function(t,i,r){n||(n=document.createElement("canvas"),s=n.getContext("2d")),i=i||0===i?i:t.width,r=r||0===r?r:t.height,n.width=i,n.height=r,s.globalAlpha=1,s.clearRect(0,0,i,r),s.drawImage(t,0,0,i,r);var e=s.getImageData(0,0,i,r);return e},i.exports.release=function(){n&&(n=null,s=null)}},{}],18:[function(t,i){var n=t("interpolation").lerp,s=t("interpolation").smoothstep;i.exports.nearest=function(t,i,n,s){var r=~~n%i,e=~~s%i;return t[r+e*i]},i.exports.bilinear=function(t,i,r,e){var h=Math.floor(r),a=Math.floor(e),o=r-h,u=e-a,c=i-1,l=h&c,f=l+1&c,y=a&c,d=y+1&c,v=t[y*i+l],x=t[y*i+f],p=t[d*i+l],z=t[d*i+f],m=s(0,1,o),w=s(0,1,u),M=n(v,x,m),g=n(p,z,m),b=n(M,g,w);return b}},{interpolation:1}]},{},[13]);